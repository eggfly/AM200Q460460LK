# ESP32S3 AMOLED 音乐播放器界面

这是一个基于ESP32S3和LVGL的音乐播放器界面，专为AMOLED屏幕设计。

## 功能特性

### 🎵 音乐播放控制
- **播放/暂停按钮**: 中央大按钮，点击切换播放状态
- **上一首/下一首**: 左右两侧按钮，用于切换歌曲
- **进度条**: 显示当前播放进度，支持拖拽跳转
- **时间显示**: 显示当前播放时间和总时长

### 🎨 界面设计
- **专辑封面**: 圆形封面显示区域，支持图片显示
- **歌曲信息**: 显示歌曲标题和艺术家名称
- **音量控制**: 底部音量滑块，支持实时调节
- **深色主题**: 采用深色背景，适合AMOLED屏幕

### 🎛️ 交互功能
- **触摸支持**: 所有按钮和滑块都支持触摸操作
- **动画效果**: 进度条和时间更新带有平滑动画
- **状态反馈**: 播放状态变化时按钮图标会相应更新

## 界面布局

```
┌─────────────────────────────────────┐
│                                     │
│           [专辑封面]                 │
│                                     │
│           歌曲标题                   │
│           艺术家名称                 │
│                                     │
│    ──────────────────────────────   │
│    00:00                   03:00    │
│                                     │
│    [◀]    [▶/⏸]    [▶]            │
│                                     │
│    🔊 ──────────────────────────    │
│                                     │
└─────────────────────────────────────┘
```

## 文件结构

```
main/
├── main.c                 # 主程序文件
├── music_player_ui.c      # 音乐播放器UI实现
├── music_player_ui.h      # 音乐播放器UI头文件
└── CMakeLists.txt         # 编译配置
```

## API接口

### 主要函数

```c
// 创建音乐播放器界面
void music_player_create_ui(void);

// 更新播放进度
void music_player_update_progress(uint32_t current, uint32_t total);

// 更新歌曲信息
void music_player_update_song_info(const char *title, const char *artist);

// 设置播放状态
void music_player_set_playing_state(bool playing);

// 获取播放状态
bool music_player_get_playing_state(void);
```

### 使用示例

```c
// 创建界面
music_player_create_ui();

// 设置歌曲信息
music_player_update_song_info("夜曲", "周杰伦");

// 开始播放
music_player_set_playing_state(true);

// 更新播放进度（每秒调用一次）
music_player_update_progress(current_time, total_duration);
```

## 编译和运行

1. **配置项目**:
   ```bash
   idf.py menuconfig
   ```

2. **编译项目**:
   ```bash
   idf.py build
   ```

3. **烧录到设备**:
   ```bash
   idf.py flash
   ```

4. **监控输出**:
   ```bash
   idf.py monitor
   ```

## 硬件要求

- **主控**: ESP32S3
- **屏幕**: AMOLED显示屏 (460x460分辨率)
- **触摸**: 电容触摸屏
- **存储**: 足够的Flash存储空间

## 自定义配置

### 修改界面颜色
在 `music_player_ui.c` 中可以修改以下颜色值：
- 背景色: `0x1a1a1a`
- 播放按钮: `0x1DB954` (Spotify绿)
- 进度条: `0x1DB954`
- 文字颜色: `0xFFFFFF` (白色)

### 调整布局
可以修改以下参数来调整界面布局：
- 专辑封面大小: `200x200`
- 按钮大小: 播放按钮 `80x80`，其他按钮 `60x60`
- 进度条宽度: `380px`

## 扩展功能

### 添加真实音频播放
1. 集成音频解码库（如libmad、libmp3lame）
2. 添加SD卡或SPIFFS文件系统支持
3. 实现音频输出到I2S或DAC

### 添加网络功能
1. 集成WiFi连接
2. 添加网络音乐流媒体支持
3. 实现在线音乐搜索和播放

### 添加更多控制
1. 播放模式切换（循环、随机、单曲）
2. 均衡器设置
3. 播放列表管理

## 注意事项

1. **内存使用**: LVGL需要足够的内存来渲染界面
2. **触摸响应**: 确保触摸屏驱动正确配置
3. **字体支持**: 确保LVGL配置了中文字体支持
4. **性能优化**: 对于复杂动画，可能需要调整LVGL配置

## 故障排除

### 常见问题

1. **界面不显示**: 检查LVGL初始化和屏幕驱动
2. **触摸无响应**: 检查触摸屏驱动和I2C配置
3. **内存不足**: 调整LVGL缓冲区大小
4. **编译错误**: 确保所有依赖库正确安装

### 调试信息
程序会输出详细的调试信息，包括：
- 触摸坐标
- 播放状态变化
- 音量调节
- 进度更新

## 许可证

本项目基于MIT许可证开源。 